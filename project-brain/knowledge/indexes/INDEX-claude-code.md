# INDEX — claude-code
<!-- type: SUB-INDEX -->
<!-- cluster-tag: claude-code -->
<!-- updated: 2026-02-19 -->
<!-- member-count: 16 -->
<!-- parent: INDEX-MASTER.md -->
<!-- format: compressed-v1 (LEARN-046) -->

## About
16 files: Claude Code internals — memory,skills,hooks,subagents,MCP,agent-SDK,plugins,costs,workflows,architecture,brain integration. Load when working on Claude Code integration tasks.

---

L004|context-engineering,claude-code,knowledge-files,token-management,research-workflow,CLAUDE-files|→S000,L001,L002|←L005,L006,L017,L024|v:18.0|Landgraf Substack: 3 pillars of context engineering (architecture knowledge, PRD, deep technical docs). 3-step research workflow: OpenAI Deep Research (breadth)→Claude Research (refinement)→synthesis. Token economics: front-loaded docs beat real-time research by orders of magnitude ($40-70 per research vs near-zero for precomputed). Validates brain architecture.|d:adopt @path code refs; 50KB splitting threshold; two-phase research for brain ingest|!Claude Code specific advice

L005|claude-code,best-practices,context-management,CLAUDE-md,prompting,workflows,subagents,agent-sdk,hooks,skills,verification,session-management|→S000,L004,L013,L014,L017,L018|←L006,L007,L008,L009,L010,L013,L014,L015,L016,L017,L018,L019,L024,G003,R002,R003,L039 (17←hub)|v:60.0|Anthropic official best practices. Context window=#1 resource. 9 areas: verification, 4-phase workflow (Explore→Plan→Implement→Commit), specific context, CLAUDE.md authoring, environment config, communication, session mgmt, Agent SDK, 5 anti-patterns. 7 brain takeaways. Later LEARNs supersede on specific topics (MCP=L013, SDK=L014, costs=L017, workflows=L018) but this=best single-file overview.|d:skills/CLAUDE.md @path=brain delivery mechanism; anti-patterns→RULE file|!source may update as Claude Code evolves

L006|claude-code,CLAUDE-md,auto-memory,memory-hierarchy,rules,imports,configuration|→S000,L004,L005|←L007,L010,L011,L017,L019,G003|v:24.5|Claude Code memory deep dive. Auto memory (200-line MEMORY.md+topic files) + CLAUDE.md (user-written). 6-level hierarchy with priority. @path syntax (relative,max depth 5). .claude/rules/*.md with path-specific conditional rules (YAML frontmatter paths field+globs). Auto memory independently converges on fat-index=strong validation.|d:auto memory parallels brain; .claude/rules/=our RULEs; @path=brain delivery; path-specific rules for context scoping|!auto memory still rolling out (opt-in)

L007|claude-code,skills,SKILL-md,slash-commands,workflows,configuration|→S000,L005,L006|←L008,L009,L016,L019,G003,R003|v:24.0|Skills system reference. SKILL.md+YAML frontmatter. Reference vs task content types. Frontmatter: name,description,disable-model-invocation,user-invocable,allowed-tools,model,context(fork),agent,hooks. $ARGUMENTS+$N substitutions. !command dynamic context. Supporting files for >500 lines. 2% context budget. Agent Skills open standard (agentskills.io).|d:skills=brain knowledge delivery; disable-model-invocation for workflows; supporting files=brain architecture; dynamic context=brain search; context:fork for isolation|!2% budget limits skill count

L008|claude-code,hooks,automation,lifecycle,deterministic,configuration|→S000,L005,L007,L015,L016|←L013,L016,L019,G003,R001,R004|v:26.0|Hooks reference+guide. 14 lifecycle events, 3 hook types (command,prompt,agent). Exit codes (0=proceed,2=block). PreToolUse decision control, matcher patterns, async hooks, MCP tool matching, SessionStart env persistence, prompt hooks (ok/reason), agent hooks (50 turns). 6 scope locations.|d:SessionStart=brain loading; PreCompact=brain preservation; PostToolUse=auto-deposit; Stop=handoff quality gate|!hooks snapshot at startup. Prompt/agent add latency. Stop loops without stop_hook_active.

L009|claude-code,subagents,delegation,context-isolation,custom-agents,persistent-memory|→S000,L005,L007|←L011,L015,L016,L026,L027,S001,L039|v:24.0|Subagent system. Built-in: Explore(Haiku,read-only),Plan,general-purpose,Bash,etc. Custom via .claude/agents/*.md with YAML. 4 storage locations. Persistent memory (3 scopes — converges on fat-index). Foreground/background, resumable. CLI-defined agents. Cannot spawn subagents.|d:brain-searcher(Explore/Haiku); persistent memory parallels brain; brain-depositor subagent; skills preloading|!can't recurse. Background can't use MCP. Custom agents=user-invoked only (not via Task tool). Background Write denied in default mode.

L010|claude-code,architecture,agentic-loop,tools,context-window,sessions,checkpoints|→S000,L005,L006,L013,L014,L017|←L013,L014,L017,L018,R002,L034,L039|v:27.5|Architecture overview. Agentic loop: gather→act→verify (phases blend). 5 tool categories. Session model: starts fresh, branch-aware, resume/fork. Auto-compaction clears old outputs then summarizes (may lose early instructions→CLAUDE.md). Checkpoints (every edit, Esc+Esc rewind). 4 permission modes.|d:agentic loop validates search→work; session independence=why brains exist; compaction=info loss (validates SESSION-HANDOFF)|!checkpoints only cover Claude's changes. Session perms not restored on resume.

L013|claude-code,MCP,model-context-protocol,transports,tools,resources,prompts,brain-server|→S000,L002,L005,L008,L010|←L005,L010,L014,L016,L023,L028,L040,C001,L041|v:27.0|MCP reference. 3 transports (HTTP recommended,SSE deprecated,stdio for local). 3 scopes (local>project>user). OAuth+header auth. Output limits (10K warn,25K max). Tool Search auto-activates 10% context. Resources as @-mentionable. Prompts as /slash commands. claude mcp serve. Plugin-bundled servers. Enterprise managed MCP. Brain MCP server architecture validated.|d:brain MCP confirmed high-priority (validates L002 #1)|!brain responses<10K tokens. Windows stdio needs cmd /c for npx (Python avoids).

L014|claude-code,agent-sdk,headless,programmatic,automation,python,typescript,MCP-tools|→S000,L005,L010,L013|←L005,L010,L018,L037,L039|v:17.0|Agent SDK (renamed from "Claude Code SDK"). pip install claude-agent-sdk / npm. query() (one-shot) vs ClaudeSDKClient (multi-turn,hooks,MCP,interrupts). setting_sources defaults None (no CLAUDE.md unless explicit). In-process MCP tools via @tool+create_sdk_mcp_server(). Python callbacks for hooks. 1M context beta.|d:Agent SDK=brain automation engine. setting_sources defaults None=critical constraint|!Python hooks missing SessionStart/End. "Headless mode" renamed.

L015|claude-code,agent-teams,coordination,multi-agent,task-list,messaging,experimental|→S000,L005,L009|←L008,L026,L027,S001|v:18.5|Agent teams=full independent sessions (not subagent children) with shared task list+mailbox. Mesh topology (any-to-any). Delegate mode, plan approval gates. Context: teammates DON'T inherit lead's conversation. Experimental (CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1). ~7x tokens.|d:teams for complex brain ops (parallel ingestion,multi-area search). High cost limits to high-value.|!experimental. No session resumption. No nested teams. Windows no split panes. 7x cost.

L016|claude-code,plugins,packaging,distribution,plugin-json,namespacing,marketplace|→S000,L005,L007,L008,L009,L013|←L008|v:12.5|Plugin system: package skills+agents+hooks+MCP+LSP as distributable units. .claude-plugin/plugin.json manifest. Components at plugin root (NOT inside .claude-plugin/ — silent failure). Auto-namespacing. 4 install scopes, 5 distribution sources. Plugins cached — use ${CLAUDE_PLUGIN_ROOT}. Brain architecture split: engine(plugin,cached) vs data(project-local). Aligns with Brain Hub (G001).|d:plugin system=brain distribution mechanism. Engine/data split=key architecture.|!caching breaks path traversal. 2% context budget limits skills.

L017|claude-code,costs,settings,environment-variables,configuration,token-management,optimization|→S000,L004,L005,L006,L010|←L005,L010,L018|v:17.5|Cost baseline: $6/dev/day avg, ~$100-200/month API, teams 7x, background $0.04. 5-level settings hierarchy. 50+ env vars: CLAUDE_CODE_EFFORT_LEVEL, CLAUDE_CODE_SUBAGENT_MODEL, CLAUDE_AUTOCOMPACT_PCT_OVERRIDE (~95%). Complete permissions syntax with additionalDirectories for cross-dir brain access.|d:effort_level=low for maintenance; subagent_model=haiku for lookups; never disable prompt caching for brain|!rate limits org-level — brain automation competes with interactive

L018|claude-code,workflows,plan-mode,extended-thinking,recipes,automation,patterns|→S000,L005,L010,L014,L017|←L005,L029,R002,R003|v:20.5|Operational recipes. Plan Mode: Shift+Tab, --permission-mode plan, headless Plan Mode (zero-risk read-only=ideal brain search). Extended thinking: adaptive, MAX_THINKING_TOKENS, "think"/"ultrathink" NOT special keywords. 4 recipe shapes: Explore,Debug,Refactor,Test. @references auto-load CLAUDE.md=zero-config brain discovery. Git worktrees for parallel sessions.|d:headless Plan Mode=ideal brain search. 4 RESET template variants identified (not created)|!Plan Mode Ctrl+G vs Shift+Tab are different functions

L019|claude-code,integration,CLAUDE-md,rules,skills,hooks,automation,brain-delivery,testing,windows,matcher-format|→S000,L005,L006,L007,L008,G003|←R001,R003,R004,L034,L041,L042|v:23.5|Implementation+test results of brain→Claude Code integration (Layers 1-3). 8 files: CLAUDE.md(@path INIT.md), 3 rules, 4 skills, 4 hooks. Layer 1 (CLAUDE.md+rules) working incl @path with Windows spaces. Layer 2 (skills) working after disable-model-invocation fix; spaces-in-path bug→copy to ~/.claude/skills/. Layer 3 (hooks) CRITICAL: matcher must be string regex — JSON objects silently kill ALL hooks.|d:@path imports INIT.md (not INDEX-MASTER); disable-model-invocation:false; PostToolUse "Edit|Write"+chr(92); string matchers only; skills→~/.claude/skills/|!prompt hooks unreliable for Stop. All components tested+passing 2026-02-15.

L039|anthropic,agent-sdk,agents,feedback-loop,context-gathering,verification,tool-design,code-generation,evaluation,practical-patterns|→L038,L014,L010,L005,L009|←∅|v:8.0|Anthropic practical agent guide. Complements L038 (what) with HOW. 4-stage feedback loop (gather→act→verify→iterate). Context hierarchy: agentic search>semantic search>subagents>compaction. Verification: rules-based>visual>LLM-as-judge. Tool prominence=prioritization. Code generation>natural language for precise output.|!WebFetch returned summarized content. Article may evolve.

---

G003|integration,delivery,skills,rules,imports,claude-code,architecture|→S000,L005,L006,L007,L008|←L019|v:11.5|4 mechanisms for delivering brain→Claude Code: (1) skills (on-demand,2% budget), (2) rules (always-on,lowest effort), (3) @path imports (selective,stable), (4) auto memory (Claude-controlled,not for domain knowledge). Complementary not competing. Layered: rules→skills→@path→auto memory.|!revisit when starting Phase 2 and when auto memory exits opt-in
